{% extends 'oxigenoterapia/base.html' %}
{% load custom_filters %}

{% block conteudo %}

<h3>Atendimentos realizados</h3>
<form class="form-inline" action="{% url 'consulta_atendimentos' %}" method="get">
    <div class="form-group">
        <label for="q1" class="mr-2">Mês (em número)</label>
        <input type="number" name="q" id="q1" value="{{ mes_pesquisa }}" disabled="" class="form-control-sm mr-4">
    </div>
    <div class="form-group">
        <label for="q2" class="mr-2">Ano</label>
        <input type="number" name="year" id="q2" value="{{ ano_pesquisa }}" disabled="" class="form-control-sm mr-4">
    </div>
    <div class="form-group">
        <label for="q2" class="mr-2">Fisioterapeuta</label>
        <input type="text" name="fisioterapeuta" value="{{ fisioterapeuta_pesquisa }}" disabled="" class="form-control-sm mr-4">
    </div>
    
    <button type="submit" class="btn btn-primary">Pesquisar</button> 
</form>

<br>
<div class="table-container table-responsive">
    <table class="table table-striped" id="tabela-listar" style="font-size: 11px;">
        <thead>
            <tr>
                <th style="text-align: center">TIPO DE EQUIPAMENTO</th>
                <th style="text-align: center">ATENDIMENTOS NO PERÍODO</th>
            </tr>
        </thead>
        <tbody>
            {% for atendimento in atendimentos_por_finalidade %}
                <tr>
                    <td style="text-align: center">{{ atendimento.finalidade }}</td>
                    <td style="text-align: center">{{ atendimento.total }}</td>
                </tr>
            {% empty %}
                <tr>
                    <td colspan="2" style="text-align: center">Nenhum atendimento registrado para este período.</td>
                </tr>
            {% endfor %}
            <tr>
                <td style="text-align: center">TOTAL GERAL DE ATENDIMENTOS</td>
                <td style="text-align: center">{{ total_geral }}</td>
            </tr>
        </tbody>
    </table>
</div>
<div class="table-container table-responsive" style="margin-top: 20px;">
    <table class="table table-striped" id="tabela-pacientes" style="font-size: 11px;">
        <thead>
            <tr>
                <th style="text-align: center">PACIENTES</th>
                <th style="text-align: center">TOTAL</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td style="text-align: center">ATIVOS</td>
                <td style="text-align: center">{{ total_ativos }}</td>
            </tr>
            {% if not esconde_ativos_periodo %}
            <tr>
                <td style="text-align: center">ATIVOS NO PERÍODO PESQUISADO</td>
                <td style="text-align: center">{{ total_ativos_periodo }}</td>
            </tr>
            {% endif %}
            <tr>
                <td style="text-align: center">ÓBITO</td>
                <td style="text-align: center">{{ total_obitos }}</td>
            </tr>
            <tr>
                <td style="text-align: center">ALTA</td>
                <td style="text-align: center">{{ total_altas }}</td>
            </tr>
        </tbody>
    </table>
</div>
</div>
<div class="text-center mt-4">
    <a href="{% url 'consulta_atendimentos_pdf' %}?{{ request.GET.urlencode }}" target="_blank" class="btn btn-primary">
        <i class="fas fa-file-pdf"></i> Gerar PDF
    </a>

    <a href="javascript:history.back()" class="btn btn-secondary">
        <i class="fas fa-arrow-left"></i>
         Voltar
    </a>
</div>

{% endblock %}


<a href="javascript:history.back()" class="btn btn-secondary btn-sm mr-2 ">Voltar</a>

<!--
    FAZER ESTES MESMOS RELATÓRIOS PORÉM IMPRIMÍVEIS

    AS MÁSCARAS E FILTROS SÃO DO CPAP E BIPAP E OS CATETER, MÁSCARA DE TRAQUEOSTOMIA E COPO UMIDIFICADOR SÃO DA OXIGENOTERAPIA. 

    NA TELA DE PRESCRIÇÃO E MODO DE USO, TENTAR COLOCAR SEPARADO A PARTE DE OXIGENOTERAPIA DA PARTE DE VENTILAÇÃO (CPAP, BIPAP E VENTILADOR) VISUALMENTE. SOMENTE OS PARÂMETROS QUE SÃO DO VENTILADOR O RESTANTE DOS ITENS SÃO DO OXIGÊNIO.





    
    
    
    
-->